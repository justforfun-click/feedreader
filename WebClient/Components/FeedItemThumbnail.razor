@inject FeedService FeedService
@inject IJSRuntime JsRuntime

@if (FeedItem.TopicPictureUri != null)
{
    <a class="feed-item-thumbnail-with-topic-picture @(FeedItem.IsReaded ? "readed" : "")" href="@FeedItem.PermentLink" target="_blank" @onclick="Click" onauxclick="@((Action)(() => Click()))">
        <img src="@FeedItem.TopicPictureUri"/>
        <div class="title">@FeedItem.Title</div>
        <div class="time-and-channel">@FeedItem.PubDate</div>
    </a>
}
else
{
    <a class="feed-item-thumbnail-without-topic-picture @(FeedItem.IsReaded ? "readed" : "")" href="@FeedItem.PermentLink" target="_blank" @onclick="Click" onauxclick="@((Action)(() => Click()))">
        <div class="title">@FeedItem.Title</div>
        <div class="summary"><span>@FeedItem.Summary</span></div>
        <div class="time-and-channel">@FeedItem.PubDate</div>
    </a>
}

@code
{
    [Parameter]
    public FeedItem FeedItem { get; set; }

    public void Click()
    {
        _ = FeedService.MarkAsReadedAsync(FeedItem);
    }
}
